<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>Stencil Component Starter</title>

  <script type="module" src="/build/wab-components.esm.js"></script>
  <script nomodule src="/build/wab-components.js"></script>
  <link rel="stylesheet" href="/build/wab-components.css" />
</head>

<body>

  <!-- <wab-text-input value="red" name="name" label="Nome" placeholder="Inserisci il tuo nome"
                  details="fai qualcosa di carino"
                  errors="qualcosa Ã¨ andato storto">
    <div slot="details">ciao come va?</div>
  </wab-text-input> -->



  <wab-form-builder id="form-builder">
    <input type="hidden" name="csrf" value="86as87a68d6asd8">
  </wab-form-builder>

  <script>
    /**
     *
     * @type {import('./components/form-builder/wab-form-schema').WabFormSchema}
     */
    const formSchema = {
      lazy: true,
      useAjax: true,
      "fields": [
        {
          "type": "text",
          "name": "nome",
          "label": "Nome",
          'placeholder': 'Inserisci il tuo nomeeeee',
          'conditions': (formData) => formData.cognome === 'ciao',
          validators: (yup) => yup.string().defined().min(4),
        },
        {
          "type": "text",
          "name": "cognome",
          "label": "Cognome",
          'placeholder': 'Inserisci il tuo cognome',
          'readonly': true,
          value: 'ciao',
          // validators: (yup) => yup.string().required(),
        },
        {
          "type": "email",
          "name": "email",
          "label": "Email",
          // disabled: (formData) => !formData?.hasEmail,
          conditions: (formData) => formData?.hasEmail,
          details: 'Inserisci la tua email',
          validators: (yup) => yup.string().email().required(),
        },
        {
          "type": "checkbox",
          "name": "hasEmail",
          "label": "Permetti Email",
          details: 'Inserisci la tua email',
          "checked" : true,
          "value": "si"
        }
      ],
      onSubmit: async (formData) => {
        console.log('submittinh', formData);

        const res = await new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve({
              status: 200,
              data: {
                message: 'ok',
              },
            });
          }, 2000);
        });

        console.log('res', res);
      },
    };

    document.getElementById('form-builder').schema = formSchema
  </script>
</body>

</html>
